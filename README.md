#  LMSsystem - разработка LMS-системы, в которой каждый желающий может размещать свои полезные материалы или курсы

![Python](https://img.shields.io/badge/Python-3.11.9-blue)
![Django](https://img.shields.io/badge/django-5.1.1-092E20?logo=django&logoColor=white)
![DRF](https://img.shields.io/badge/django--rest--framework-3.15.2-blue?labelColor=333333&logo=django&logoColor=white&color=blue)
![DRF-simpleJWT](https://img.shields.io/badge/django--rest--framework--simplejwt-5.3.1-blue?labelColor=333333&logo=django&logoColor=white&color=blue)
![Celery](https://img.shields.io/badge/Celery-5.4.0-AAE084&logo=сelery&logoColor=FFFFFF&label)
![Redis](https://img.shields.io/badge/Redis-5.1.1-DC382D?&logo=redis&logoColor=white)
![Stripe](https://img.shields.io/badge/Stripe-11.1.1-4379ff?&logo=stripe&logoColor=white)

## Описание основных моментов проекта:

Задание 1: Создайте новый Django-проект, подключите DRF в настройках проекта.\
Задание 2: Создайте следующие модели:\
Пользователь: все поля от обычного пользователя, _но авторизация на email_. Модель пользователя разместить в приложении users\
Курс: название, превью (картинка), описание.\
Урок: название, описание, превью (картинка), ссылка на видео.\
Урок и курс - это связанные между собой сущности. Уроки складываются в курс, в одном курсе может быть много уроков. Реализовать связь между ними.\
Модель курса и урока разместите в отдельном приложении. Название для приложения выбирайте такое, чтобы оно описывало то, с какими сущностями приложение работает. Например, lms или materials - отличные варианты.\
Задание 3: Описать CRUD для моделей курса и урока.\
Для реализации CRUD для курса использовать Viewsets, а для урока - Generic-классы. Для работы контроллеров описать простейшие сериализаторы. Работу каждого эндпоинта необходимо проверять с помощью Postman.\

Задание 1: Для модели Курса добавить в сериализатор поле вывода _количества уроков_. Поле реализовать с помощью SerializerMethodField()\
Задание 2: Добавить новую модель в приложение users\
Платежи: пользователь, дата оплаты, оплаченный курс или урок, сумма оплаты, способ оплаты: наличные или перевод на счет.\
Поля **п**ользователь, **о**плаченный курс и отдельно **о**плаченный урок должны быть ссылками на соответствующие модели.\
Записать в таблицу, соответствующую этой модели, данные через инструмент фикстур или кастомную команду.

Задание 1: Реализовать CRUD для пользователей, в том числе регистрацию пользователей, настроить в проекте использование JWT-авторизации и закрыть каждый эндпоинт авторизацией.
Эндпоинты для авторизации и регистрации должны остаться доступны для неавторизованных пользователей. Для профиля пользователя ввести ограничения, чтобы авторизованный пользователь мог просматривать любой профиль, но редактировать только свой. При этом для просмотра чужого профиля должна быть доступна только общая информация, в которую не входят: пароль, фамилия, история платежей.\
Задание 2: Завести группу модераторов и описать для нее права работы с любыми уроками и курсами, но без возможности их удалять и создавать новые. Заложить функционал такой проверки в контроллеры.\
Задание 3: Описать права доступа для объектов таким образом, чтобы пользователи, которые не входят в группу модераторов, могли видеть, редактировать и удалять только свои курсы и уроки.\

Задание 1: Для сохранения уроков и курсов реализуйте дополнительную проверку на отсутствие в материалах ссылок на сторонние ресурсы, кроме youtube.com.
То есть ссылки на видео можно прикреплять в материалы, а ссылки на сторонние образовательные платформы или личные сайты — нельзя.\
Задание 2: Добавить модель подписки на обновления курса для пользователя.\
Модель подписки должна содержать следующие поля: «пользователь» (FK на модель пользователя), «курс» (FK на модель курса). Необходимо реализовать эндпоинт для установки или удаления подписки пользователя.
При этом при выборке данных по курсу пользователю необходимо присылать признак подписки текущего пользователя на курс. То есть давать информацию, подписан пользователь на обновления курса или нет.\
Задание 3: Реализовать пагинацию для вывода всех уроков и курсов в отдельном файле paginators.py.\
Указать параметры page_size, page_size_query_param, max_page_size для класса PageNumberPagination. Интегрировать пагинатор в контроллеры, используя параметр pagination_class.\
Задание 4: Написать тесты, которые будут проверять корректность работы CRUD уроков и функционал работы подписки на обновления курса.\
В тестах использовать метод setUp для заполнения базы данных тестовыми данными. Обработать возможные варианты взаимодействия с контроллерами пользователей с разными правами доступа. Для аутентификации пользователей использовать self.client.force_authenticate().\

Практически каждый сервис, над которым работают веб-разработчики, требует или создания документации, или работы с документацией и создания интеграции.
В продолжение работы над проектом необходимо оформить документацию, а также поработать со сторонней документацией.\
Задание 1: Подключить и настроить вывод документации для проекта. Убедиться, что каждый из реализованных эндпоинтов описан в документации верно, при необходимости описать вручную.\
Задание 2: Подключить возможность оплаты курсов через https://stripe.com/docs/api.\
При создании сессии нужно передавать id цены, которая соответствует конкретному продукту. Подключение оплаты лучше всего рассматривать как обычную задачу подключения к стороннему API.
Основной путь: запрос на покупку → оплата.\

Так как каждый веб-сервис стремится отвечать всё быстрее, выполнение задач в синхронном режиме становится недоступным. То есть клиент не должен ждать, когда отправится письмо и почтовый сервис ответит. Именно поэтому появились отложенные и фоновые задачи — чтобы сокращать время обработки запроса пользователя и отдавать информацию как можно оперативнее.\
Задание 1: Настройте проект для работы с Celery. Также настройте приложение на работу с celery-beat для выполнения периодических задач.\
Задание 2: Ранее был реализован функционал подписки на обновление курсов. Необходимо добавить асинхронную рассылку писем пользователям об обновлении материалов курса. Пользователь может обновлять каждый урок курса отдельно. Добавьте проверку на то, что уведомление отправляется только в том случае, если курс не обновлялся более четырех часов.\
Задание 3: С помощью celery-beat реализовать фоновую задачу, которая будет проверять пользователей по дате последнего входа по полю last_login и, если пользователь не заходил более месяца, блокировать его с помощью флага is_active.\


HW27_2_project

Practice with Docker Basics & Docker Compose

For starting of containers, please use command

docker-compose up -d --build
